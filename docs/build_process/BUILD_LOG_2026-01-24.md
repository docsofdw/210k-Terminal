# Build Log - January 24, 2026

## Session Overview

This document provides a comprehensive log of the development work completed on the 210k Terminal (Treasury Intelligence Platform) during the January 24, 2026 build session. Two major phases were completed: Phase 5 (Portfolio & Alerts) and Phase 6 (Charts & History).

---

## Phase 5: Portfolio & Alerts System

### Objective
Enable users to track their personal positions in treasury companies, record buy/sell transactions, and receive notifications when price/mNAV thresholds are crossed.

---

### Database Schemas Created

#### 1. Portfolio Positions (`/db/schema/portfolio-positions.ts`)

```typescript
portfolioPositions = pgTable("portfolio_positions", {
  id: uuid("id").defaultRandom().primaryKey(),
  userId: text("user_id").notNull().references(() => customers.userId),
  companyId: uuid("company_id").notNull().references(() => companies.id),
  shares: decimal("shares", { precision: 20, scale: 8 }).notNull(),
  averageCostBasis: decimal("average_cost_basis", { precision: 20, scale: 8 }),
  averageCostBasisUsd: decimal("average_cost_basis_usd", { precision: 20, scale: 2 }),
  notes: text("notes"),
  createdAt: timestamp("created_at").defaultNow().notNull(),
  updatedAt: timestamp("updated_at").defaultNow().notNull()
})
```

**Purpose**: Stores each user's holdings in treasury companies with share count and cost basis for P&L calculations.

**Indexes**:
- `portfolio_positions_user_id_idx` on userId
- `portfolio_positions_user_company_idx` on (userId, companyId) - ensures one position per company per user

---

#### 2. Portfolio Transactions (`/db/schema/portfolio-transactions.ts`)

```typescript
transactionType = pgEnum("transaction_type", ["buy", "sell"])

portfolioTransactions = pgTable("portfolio_transactions", {
  id: uuid("id").defaultRandom().primaryKey(),
  userId: text("user_id").notNull().references(() => customers.userId),
  companyId: uuid("company_id").notNull().references(() => companies.id),
  positionId: uuid("position_id").references(() => portfolioPositions.id),
  type: transactionType("type").notNull(),
  shares: decimal("shares", { precision: 20, scale: 8 }).notNull(),
  pricePerShare: decimal("price_per_share", { precision: 20, scale: 8 }).notNull(),
  pricePerShareUsd: decimal("price_per_share_usd", { precision: 20, scale: 2 }),
  totalValue: decimal("total_value", { precision: 20, scale: 8 }).notNull(),
  totalValueUsd: decimal("total_value_usd", { precision: 20, scale: 2 }),
  btcPriceAtTransaction: decimal("btc_price_at_transaction", { precision: 20, scale: 2 }),
  fees: decimal("fees", { precision: 20, scale: 8 }),
  feesUsd: decimal("fees_usd", { precision: 20, scale: 2 }),
  notes: text("notes"),
  transactionDate: timestamp("transaction_date").notNull(),
  createdAt: timestamp("created_at").defaultNow().notNull()
})
```

**Purpose**: Records individual buy/sell transactions with full price history including BTC price at time of transaction for historical analysis.

**Indexes**:
- `portfolio_transactions_user_id_idx` on userId
- `portfolio_transactions_position_id_idx` on positionId
- `portfolio_transactions_date_idx` on transactionDate

---

#### 3. Alerts (`/db/schema/alerts.ts`)

```typescript
alertType = pgEnum("alert_type", [
  "price_above", "price_below",
  "mnav_above", "mnav_below",
  "btc_holdings",
  "pct_change_up", "pct_change_down"
])

alertChannel = pgEnum("alert_channel", ["telegram", "slack", "email"])
alertStatus = pgEnum("alert_status", ["active", "paused", "triggered", "expired"])

alerts = pgTable("alerts", {
  id: uuid("id").defaultRandom().primaryKey(),
  userId: text("user_id").notNull().references(() => customers.userId),
  companyId: uuid("company_id").references(() => companies.id),
  name: text("name"),
  type: alertType("type").notNull(),
  threshold: decimal("threshold", { precision: 20, scale: 8 }),
  thresholdPercent: decimal("threshold_percent", { precision: 10, scale: 4 }),
  channel: alertChannel("channel").default("telegram").notNull(),
  telegramChatId: text("telegram_chat_id"),
  webhookUrl: text("webhook_url"),
  status: alertStatus("status").default("active").notNull(),
  isRepeating: boolean("is_repeating").default(false).notNull(),
  cooldownMinutes: integer("cooldown_minutes").default(60),
  lastTriggeredAt: timestamp("last_triggered_at"),
  triggerCount: integer("trigger_count").default(0),
  description: text("description"),
  createdAt: timestamp("created_at").defaultNow().notNull(),
  updatedAt: timestamp("updated_at").defaultNow().notNull()
})
```

**Purpose**: Configures user alerts with various trigger types, notification channels, and cooldown periods to prevent spam.

**Alert Types Explained**:
- `price_above/below`: Trigger when stock price crosses threshold
- `mnav_above/below`: Trigger when mNAV multiple crosses threshold
- `btc_holdings`: Trigger when company's BTC holdings change
- `pct_change_up/down`: Trigger on percentage price movement

---

#### 4. Alert History (`/db/schema/alert-history.ts`)

```typescript
alertHistory = pgTable("alert_history", {
  id: uuid("id").defaultRandom().primaryKey(),
  alertId: uuid("alert_id").notNull().references(() => alerts.id),
  companyId: uuid("company_id").references(() => companies.id),
  alertType: text("alert_type").notNull(),
  threshold: decimal("threshold", { precision: 20, scale: 8 }),
  actualValue: decimal("actual_value", { precision: 20, scale: 8 }),
  channel: text("channel").notNull(),
  notificationSent: boolean("notification_sent").default(false).notNull(),
  notificationError: text("notification_error"),
  messageContent: text("message_content"),
  triggeredAt: timestamp("triggered_at").defaultNow().notNull()
})
```

**Purpose**: Logs every alert trigger with the actual value that caused it, notification status, and any errors for debugging.

---

### Notification System

#### Telegram Integration (`/lib/notifications/telegram.ts`)

```typescript
interface TelegramMessage {
  chatId: string
  text: string
  parseMode?: "HTML" | "Markdown"
}

// Core function
async function sendTelegramMessage(message: TelegramMessage): Promise<TelegramSendResult>

// Alert-specific helpers
async function sendPriceAlert(chatId, ticker, companyName, alertType, currentPrice, threshold)
async function sendMnavAlert(chatId, ticker, companyName, alertType, currentMnav, threshold)
async function sendHoldingsAlert(chatId, ticker, companyName, previousHoldings, currentHoldings)
```

**Environment Variables Required**:
- `TELEGRAM_BOT_TOKEN`: Bot token from @BotFather
- `TELEGRAM_DEFAULT_CHAT_ID`: Default chat for alerts

**Message Format**: HTML-formatted messages with emoji indicators (ðŸ“ˆðŸ“‰), formatted numbers, and company details.

---

#### Slack Integration (`/lib/notifications/slack.ts`)

```typescript
interface SlackMessage {
  webhookUrl: string
  text: string
  blocks?: SlackBlock[]
}

async function sendSlackMessage(message: SlackMessage): Promise<SlackSendResult>
async function sendSlackPriceAlert(webhookUrl, ticker, companyName, alertType, currentPrice, threshold)
async function sendSlackMnavAlert(webhookUrl, ticker, companyName, alertType, currentMnav, threshold)
```

**Environment Variables Required**:
- `SLACK_DEFAULT_WEBHOOK_URL`: Incoming webhook URL from Slack app

**Message Format**: Rich Slack blocks with sections, dividers, and formatted fields.

---

### Server Actions (`/actions/portfolio.ts`)

```typescript
// Position Management
async function getPositionsWithCompanies()
async function createPosition(data: { companyId, shares, averageCostBasis?, notes? })
async function updatePosition(id, data)
async function deletePosition(id)

// Transaction Management
async function getTransactionsWithCompanies()
async function createTransaction(data: { companyId, type, shares, pricePerShare, ... })
async function deleteTransaction(id)
```

**Key Features**:
- All mutations include audit logging via `logAudit()`
- Automatic position updates when transactions are created
- Cost basis recalculation on new buys

---

### Server Actions (`/actions/alerts.ts`)

```typescript
// Alert CRUD
async function getAlertsWithCompanies()
async function createAlert(data)
async function updateAlert(id, data)
async function deleteAlert(id)
async function toggleAlertStatus(id)

// Alert Processing
async function checkAndTriggerAlerts()
async function processAlert(alert, company, currentValue)

// History
async function getAlertHistoryWithDetails()
```

**Alert Processing Logic**:
1. Fetch all active alerts
2. For each alert, get current market data
3. Check if threshold is crossed based on alert type
4. Respect cooldown period (don't re-trigger too soon)
5. Send notification via configured channel
6. Log to alert_history table
7. Update trigger count and last_triggered_at

---

### UI Components Created

#### Portfolio Pages

| File | Purpose |
|------|---------|
| `/dashboard/portfolio/page.tsx` | Main positions view with summary cards |
| `/dashboard/portfolio/transactions/page.tsx` | Transaction history with buy/sell totals |
| `/_components/positions-table.tsx` | Interactive table with delete, P&L display |
| `/_components/transactions-table.tsx` | Transaction list with type badges |
| `/_components/add-position-dialog.tsx` | Form to add new position |
| `/_components/add-transaction-dialog.tsx` | Form to record buy/sell |

#### Alerts Pages

| File | Purpose |
|------|---------|
| `/dashboard/alerts/page.tsx` | Alert management with status counts |
| `/dashboard/alerts/history/page.tsx` | Triggered alert history |
| `/_components/alerts-table.tsx` | Alert list with toggle, edit, delete |
| `/_components/add-alert-dialog.tsx` | Alert creation form with all options |

---

### Audit Log Updates

Extended the audit entity enum to include new entities:

```typescript
auditEntity = pgEnum("audit_entity", [
  "company", "holdings", "user", "alert",
  "portfolio", "position", "transaction"  // NEW
])
```

---

## Phase 6: Charts, History & Watchlist

### Objective
Provide historical data visualization, snapshot viewing at any past date, and personal watchlist functionality.

---

### Dependencies Added

```json
{
  "recharts": "^2.x",      // React charting library
  "googleapis": "^140.x"   // Google APIs client for Sheets
}
```

---

### Database Schemas Created

#### 1. Daily Snapshots (`/db/schema/daily-snapshots.ts`)

```typescript
dailySnapshots = pgTable("daily_snapshots", {
  id: uuid("id").defaultRandom().primaryKey(),
  snapshotDate: timestamp("snapshot_date").notNull(),
  companyId: uuid("company_id").references(() => companies.id),
  ticker: text("ticker").notNull(),
  companyName: text("company_name").notNull(),

  // Market Data
  stockPrice: decimal("stock_price", { precision: 20, scale: 4 }),
  stockPriceUsd: decimal("stock_price_usd", { precision: 20, scale: 4 }),
  marketCapUsd: decimal("market_cap_usd", { precision: 20, scale: 2 }),

  // BTC Data
  btcPrice: decimal("btc_price", { precision: 20, scale: 2 }).notNull(),
  btcHoldings: decimal("btc_holdings", { precision: 20, scale: 8 }),
  btcNav: decimal("btc_nav", { precision: 20, scale: 2 }),

  // Calculated Metrics
  evUsd: decimal("ev_usd", { precision: 20, scale: 2 }),
  mNav: decimal("m_nav", { precision: 10, scale: 4 }),
  satsPerShare: decimal("sats_per_share", { precision: 20, scale: 0 }),
  btcPerShare: decimal("btc_per_share", { precision: 20, scale: 8 }),

  // Balance Sheet Snapshot
  sharesOutstanding: decimal("shares_outstanding", { precision: 20, scale: 0 }),
  cashUsd: decimal("cash_usd", { precision: 20, scale: 2 }),
  debtUsd: decimal("debt_usd", { precision: 20, scale: 2 }),
  preferredsUsd: decimal("preferreds_usd", { precision: 20, scale: 2 }),

  // Metadata
  fxRate: decimal("fx_rate", { precision: 20, scale: 6 }),
  tradingCurrency: text("trading_currency"),
  dataSource: text("data_source").default("database").notNull(),
  rawData: jsonb("raw_data"),
  createdAt: timestamp("created_at").defaultNow().notNull()
})
```

**Purpose**: Stores complete point-in-time snapshots of each company's data for historical analysis. Denormalizes ticker/name for historical accuracy (company names can change).

**Indexes**:
- `daily_snapshots_date_idx` on snapshotDate
- `daily_snapshots_company_date_idx` on (companyId, snapshotDate)
- `daily_snapshots_ticker_date_idx` on (ticker, snapshotDate)

---

#### 2. Market Snapshots (`/db/schema/daily-snapshots.ts`)

```typescript
marketSnapshots = pgTable("market_snapshots", {
  id: uuid("id").defaultRandom().primaryKey(),
  snapshotDate: timestamp("snapshot_date").notNull().unique(),
  btcPrice: decimal("btc_price", { precision: 20, scale: 2 }).notNull(),

  // Aggregates
  totalBtcHoldings: decimal("total_btc_holdings", { precision: 20, scale: 8 }),
  totalMarketCapUsd: decimal("total_market_cap_usd", { precision: 20, scale: 2 }),
  totalEvUsd: decimal("total_ev_usd", { precision: 20, scale: 2 }),
  totalBtcNav: decimal("total_btc_nav", { precision: 20, scale: 2 }),

  // mNAV Statistics
  avgMNav: decimal("avg_m_nav", { precision: 10, scale: 4 }),
  medianMNav: decimal("median_m_nav", { precision: 10, scale: 4 }),
  weightedAvgMNav: decimal("weighted_avg_m_nav", { precision: 10, scale: 4 }),

  companyCount: decimal("company_count", { precision: 10, scale: 0 }),
  createdAt: timestamp("created_at").defaultNow().notNull()
})
```

**Purpose**: Stores aggregate market metrics per day for efficient chart rendering without recalculating from individual snapshots.

---

#### 3. Watchlist (`/db/schema/watchlist.ts`)

```typescript
watchlist = pgTable("watchlist", {
  id: uuid("id").defaultRandom().primaryKey(),
  userId: text("user_id").references(() => customers.userId),
  companyId: uuid("company_id").references(() => companies.id),
  notes: text("notes"),
  sortOrder: text("sort_order").default("0"),
  createdAt: timestamp("created_at").defaultNow().notNull()
})
```

**Purpose**: Simple user-company relationship for personal watchlist with optional notes.

---

### Google Sheets Integration (`/lib/api/google-sheets.ts`)

#### Configuration

```typescript
const SPREADSHEET_ID = "1fNQGJIaDT3czM7Bqd9dZ6WTJYk-54niL9F3Pe9zYgpQ"
const COMPS_TABLE_SHEET = "Comps Table"
```

#### Authentication

Uses Google Service Account authentication:

```typescript
function getGoogleAuth() {
  const credentials = process.env.GOOGLE_SERVICE_ACCOUNT_KEY
  const parsed = JSON.parse(credentials)
  return new google.auth.GoogleAuth({
    credentials: parsed,
    scopes: ["https://www.googleapis.com/auth/spreadsheets.readonly"]
  })
}
```

#### Data Fetching

```typescript
interface SheetCompanyData {
  ticker: string
  name: string
  price: number | null
  btcHoldings: number | null
  marketCapUsd: number | null
  mNav: number | null
  // ... more fields
}

async function getCompsTableData(): Promise<SheetDataResult | null>
async function getSheetDataAsBackup(): Promise<Map<string, SheetCompanyData> | null>
```

**Column Detection**: The integration auto-detects column positions by searching headers for keywords like "ticker", "btc", "mnav", etc. This makes it resilient to column reordering in the spreadsheet.

**Environment Variables Required**:
```
GOOGLE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"k-terminal-485321",...}'
```

---

### Daily Snapshot Cron Job (`/app/api/cron/daily-snapshot/route.ts`)

**Schedule**: Runs at midnight UTC daily (`0 0 * * *`)

**Process Flow**:

1. **Authenticate**: Verify `CRON_SECRET` header
2. **Fetch Data**:
   - All active companies from database
   - Latest BTC price
   - All stock prices (deduplicated to latest per company)
   - All FX rates (deduplicated to latest per currency)
3. **Check for Missing Data**:
   - If BTC price or stock prices are missing, fetch from Google Sheets as backup
4. **Calculate Metrics** for each company:
   - Stock price in USD (apply FX rate)
   - Market cap = price Ã— shares
   - BTC NAV = holdings Ã— BTC price
   - EV = market cap + debt + preferreds - cash
   - mNAV = EV / BTC NAV
   - Sats per share = (holdings Ã— 100,000,000) / shares
5. **Calculate Aggregates**:
   - Total BTC holdings
   - Total market cap
   - Average, median, and weighted average mNAV
6. **Insert Snapshots**:
   - One row per company in `daily_snapshots`
   - One row in `market_snapshots` with aggregates

**Response**:
```json
{
  "success": true,
  "snapshotDate": "2026-01-24T00:00:00.000Z",
  "companiesSnapshot": 15,
  "btcPrice": 105000,
  "totalBtcHoldings": 750000,
  "avgMNav": 2.15,
  "dataSource": "database"  // or "mixed" if Google Sheets was used
}
```

---

### Vercel Cron Configuration (`/vercel.json`)

```json
{
  "crons": [
    { "path": "/api/cron/btc-price", "schedule": "*/5 * * * *" },
    { "path": "/api/cron/stock-prices", "schedule": "*/15 9-16 * * 1-5" },
    { "path": "/api/cron/fx-rates", "schedule": "0 6 * * *" },
    { "path": "/api/cron/daily-snapshot", "schedule": "0 0 * * *" }
  ]
}
```

---

### Server Actions (`/actions/snapshots.ts`)

```typescript
// Fetch market-level snapshots for charts
async function getMarketSnapshots(days: number = 30)
async function getLatestMarketSnapshot()

// Fetch company-specific snapshots
async function getCompanySnapshots(companyId: string, days: number = 30)
async function getCompanySnapshotsByTicker(ticker: string, days: number = 30)

// Fetch all companies for a specific date
async function getAllCompanySnapshotsForDate(date: Date)

// Get available dates for date picker
async function getAvailableSnapshotDates()

// Get mNAV history across all companies
async function getMNavHistoryForAllCompanies(days: number = 30)
```

---

### Server Actions (`/actions/watchlist.ts`)

```typescript
async function getWatchlist()  // Returns items with company data
async function addToWatchlist(companyId: string, notes?: string)
async function removeFromWatchlist(watchlistId: string)
async function updateWatchlistNotes(watchlistId: string, notes: string)
async function isInWatchlist(companyId: string): Promise<boolean>
```

---

### Chart Components

All charts use Recharts library with consistent Bloomberg Terminal-inspired styling.

#### mNAV Chart (`/_components/mnav-chart.tsx`)

```typescript
interface MNavChartProps {
  data: SelectMarketSnapshot[]
}
```

**Features**:
- Line chart with three series: avg, median, weighted avg mNAV
- Color coding: orange (avg), green (median), blue (weighted)
- Dark theme styling with #1a1a1a tooltip background
- Y-axis formatted as "1.50x"

#### Holdings Chart (`/_components/holdings-chart.tsx`)

**Features**:
- Area chart with gradient fill
- Shows total BTC holdings over time
- Compact number formatting (e.g., "750K")

#### BTC Price Chart (`/_components/btc-price-chart.tsx`)

**Features**:
- Line chart in Bitcoin orange (#f7931a)
- Dollar formatting on Y-axis
- Compact notation for large values

---

### History Page Components

#### Date Picker (`/history/_components/date-picker.tsx`)

```typescript
interface DatePickerProps {
  selectedDate: Date | undefined
  availableDates: Date[]
}
```

**Features**:
- Uses shadcn Calendar component
- Disables dates without snapshots
- Updates URL search params on selection
- Persists selection via `?date=2026-01-24`

#### Snapshot Table (`/history/_components/snapshot-table.tsx`)

**Features**:
- Displays all companies for selected date
- Shows: ticker, price, holdings, BTC NAV, mkt cap, EV, mNAV, sats/share
- Color-coded mNAV (red if >1.5x, green if <1x)
- Badge indicator for Google Sheets data source

---

### Watchlist Components

#### Watchlist Table (`/watchlist/_components/watchlist-table.tsx`)

**Features**:
- Real-time metrics calculated from current prices
- Delete button with loading state
- Link to comps table filtered by ticker
- Notes display (truncated)

#### Add to Watchlist Dialog (`/watchlist/_components/add-to-watchlist-dialog.tsx`)

**Features**:
- Dropdown of companies not already in watchlist
- Optional notes field
- Prevents duplicate additions

---

## Environment Variables Summary

### Required for Core Functionality

```bash
# Database
DATABASE_URL="postgresql://..."

# Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_..."
CLERK_SECRET_KEY="sk_..."

# Cron Security
CRON_SECRET="your-secret-here"
```

### Required for Notifications

```bash
# Telegram
TELEGRAM_BOT_TOKEN="123456:ABC..."
TELEGRAM_DEFAULT_CHAT_ID="123456789"

# Slack
SLACK_DEFAULT_WEBHOOK_URL="https://hooks.slack.com/..."
```

### Required for Google Sheets Backup

```bash
GOOGLE_SERVICE_ACCOUNT_KEY='{"type":"service_account",...}'
```

---

## Database Schema Updates

The following tables were added to `/db/index.ts`:

```typescript
const dbSchema = {
  // ... existing tables ...

  // Phase 5
  portfolioPositions,
  portfolioTransactions,
  alerts,
  alertHistory,

  // Phase 6
  dailySnapshots,
  marketSnapshots,
  watchlist
}
```

Schema was pushed to Supabase using:
```bash
npx drizzle-kit push
```

---

## Git Commits

### Phase 5 Commit
```
0819dbe Add portfolio tracking and alerts system (Phase 5)

- Add portfolio positions and transactions schemas with full CRUD
- Create alerts system with price, mNAV, holdings, and % change triggers
- Implement Telegram and Slack notification integrations
- Build portfolio pages with real-time USD/BTC valuations
- Add alerts management and history pages
- Extend audit logging for position and transaction entities
```

### Phase 6 Commit
```
913c767 Add charts, history, and watchlist features (Phase 6)

- Install recharts for data visualization and googleapis for Sheets API
- Create Google Sheets API integration as backup data source
- Add daily-snapshots schema for storing historical comps data
- Add market-snapshots schema for aggregate metrics over time
- Create daily snapshot cron job running at midnight UTC
- Build charts page with mNAV trends, BTC holdings, and price charts
- Build history page with date picker for viewing past snapshots
- Add watchlist schema and full CRUD functionality
- Build watchlist page for tracking favorite companies
- Update vercel.json with daily-snapshot cron schedule
```

---

## File Structure Summary

```
/actions
  â”œâ”€â”€ alerts.ts          # Alert CRUD and processing
  â”œâ”€â”€ portfolio.ts       # Position and transaction CRUD
  â”œâ”€â”€ snapshots.ts       # Historical data queries
  â””â”€â”€ watchlist.ts       # Watchlist CRUD

/app/api/cron
  â””â”€â”€ daily-snapshot/
      â””â”€â”€ route.ts       # Daily snapshot cron job

/app/(authenticated)/dashboard
  â”œâ”€â”€ alerts/
  â”‚   â”œâ”€â”€ page.tsx
  â”‚   â”œâ”€â”€ history/page.tsx
  â”‚   â””â”€â”€ _components/
  â”‚       â”œâ”€â”€ alerts-table.tsx
  â”‚       â””â”€â”€ add-alert-dialog.tsx
  â”œâ”€â”€ charts/
  â”‚   â”œâ”€â”€ page.tsx
  â”‚   â””â”€â”€ _components/
  â”‚       â”œâ”€â”€ mnav-chart.tsx
  â”‚       â”œâ”€â”€ holdings-chart.tsx
  â”‚       â””â”€â”€ btc-price-chart.tsx
  â”œâ”€â”€ history/
  â”‚   â”œâ”€â”€ page.tsx
  â”‚   â””â”€â”€ _components/
  â”‚       â”œâ”€â”€ date-picker.tsx
  â”‚       â””â”€â”€ snapshot-table.tsx
  â”œâ”€â”€ portfolio/
  â”‚   â”œâ”€â”€ page.tsx
  â”‚   â”œâ”€â”€ transactions/page.tsx
  â”‚   â””â”€â”€ _components/
  â”‚       â”œâ”€â”€ positions-table.tsx
  â”‚       â”œâ”€â”€ transactions-table.tsx
  â”‚       â”œâ”€â”€ add-position-dialog.tsx
  â”‚       â””â”€â”€ add-transaction-dialog.tsx
  â””â”€â”€ watchlist/
      â”œâ”€â”€ page.tsx
      â””â”€â”€ _components/
          â”œâ”€â”€ watchlist-table.tsx
          â””â”€â”€ add-to-watchlist-dialog.tsx

/db/schema
  â”œâ”€â”€ alert-history.ts
  â”œâ”€â”€ alerts.ts
  â”œâ”€â”€ daily-snapshots.ts
  â”œâ”€â”€ portfolio-positions.ts
  â”œâ”€â”€ portfolio-transactions.ts
  â””â”€â”€ watchlist.ts

/lib
  â”œâ”€â”€ api/
  â”‚   â””â”€â”€ google-sheets.ts
  â””â”€â”€ notifications/
      â”œâ”€â”€ telegram.ts
      â””â”€â”€ slack.ts
```

---

## Deployment

Successfully deployed to Vercel with all environment variables configured:
- Database connection via Supabase pooler
- Clerk authentication
- Cron job secrets
- Google Sheets service account credentials

All cron jobs registered and running on schedule.
